From 3569af42af21fc7b7a7cfec715e2714b7edb44d0 Mon Sep 17 00:00:00 2001
From: Carl George <carl@george.computer>
Date: Wed, 6 Apr 2022 19:31:23 -0500
Subject: [PATCH 3/4] CHANGE(server): Default to system crypto policy

https://docs.fedoraproject.org/en-US/packaging-guidelines/CryptoPolicies/
---
 scripts/murmur.ini | 2 +-
 src/SSL.cpp        | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/scripts/murmur.ini b/scripts/murmur.ini
index 6fd07d2f7..4a68b11c6 100644
--- a/scripts/murmur.ini
+++ b/scripts/murmur.ini
@@ -311,7 +311,7 @@ allowping=true
 ; Note: Changing this option may impact the backwards compatibility of your
 ; Murmur server, and can remove the ability for older Mumble clients to be able
 ; to connect to it.
-;sslCiphers=EECDH+AESGCM:EDH+aRSA+AESGCM:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:AES256-SHA:AES128-SHA
+;sslCiphers="PROFILE=SYSTEM"
 
 ; If Murmur is started as root, which user should it switch to?
 ; This option is ignored if Murmur isn't started with root privileges.
diff --git a/src/SSL.cpp b/src/SSL.cpp
index 0d1e526be..04f554ffc 100644
--- a/src/SSL.cpp
+++ b/src/SSL.cpp
@@ -43,7 +43,7 @@ void MumbleSSL::destroy() {
 }
 
 QString MumbleSSL::defaultOpenSSLCipherString() {
-	return QLatin1String("EECDH+AESGCM:EDH+aRSA+AESGCM:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:AES256-SHA:AES128-SHA");
+	return QLatin1String("PROFILE=SYSTEM");
 }
 
 QList< QSslCipher > MumbleSSL::ciphersFromOpenSSLCipherString(QString cipherString) {
-- 
2.37.1

